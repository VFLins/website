{% macro render_blog_post(post, from_index=false) %}
  <div class="blog-post">
  {% if from_index %}
    <h1><a href="{{ post|url }}">{{ post.title }}</a></h1>
  {% else %}
    <h1>{{ post.title }}</h1>
  {% endif %}
  <p class="meta">{{ post.pub_date }}
    {% if post.tags %}
      {% if post.tags|length > 1 %} | tags: 
        {% for t in post.tags %} <a href="{{ ('/blog@tag/' ~ t)|url }}">{{ t }}</a> {% endfor %}
      {% else %} | tag:
        {% for t in post.tags %} <a href="{{ ('/blog@tag/' ~ t)|url }}">{{ t }}</a>{% endfor %}
      {% endif %}
    {% endif %}
  </p>
  {{ post.body }}
  </div>
{% endmacro %}
